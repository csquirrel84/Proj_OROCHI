# Project OROCHI Kibana Configuration
server.name: "orochi-kibana"
server.host: "0.0.0.0"
server.port: 5601

# Elasticsearch connection
elasticsearch.hosts: ["https://orochi-elasticsearch:9200"]
elasticsearch.username: "kibana_system"
elasticsearch.password: "{{ elastic_password }}"

# SSL/TLS settings
elasticsearch.ssl.certificateAuthorities: ["config/certs/ca/ca.crt"]
elasticsearch.ssl.verificationMode: certificate

# Security settings
xpack.security.encryptionKey: "c34d38b3a14956121ff2170e5030b471551370178f43e5626eec58b04a30fae2"
xpack.encryptedSavedObjects.encryptionKey: "d6a5eff4f6b8c5e8b6f3e2d1c8b5a4c3b2a1d9e8f7c6b5a4e3d2c1b9a8f7e6d5"
xpack.reporting.encryptionKey: "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0e1f2"

# Fleet settings
xpack.fleet.agents.elasticsearch.hosts: ["https://orochi-elasticsearch:9200"]
xpack.fleet.agents.fleet_server.hosts: ["https://{{ ansible_default_ipv4.address }}:{{ fleet_port }}"]

# Monitoring
monitoring.ui.container.elasticsearch.enabled: true
monitoring.ui.container.logstash.enabled: true

# Logging
logging.appenders.file.type: file
logging.appenders.file.fileName: /usr/share/kibana/logs/kibana.log
logging.appenders.file.layout.type: json
logging.root.appenders: [default, file]
logging.root.level: info

# Session timeout
xpack.security.session.idleTimeout: "1h"
xpack.security.session.lifespan: "30d"

# Maps configuration
xpack.maps.enabled: true
xpack.maps.showMapVisualizationTypes: true

# Machine Learning
xpack.ml.enabled: true

# Alerting
xpack.actions.enabled: true
xpack.alerting.enabled: true

# Canvas
xpack.canvas.enabled: true

# Dev tools
console.enabled: true
dev_tools.enabled: true

# Telemetry
telemetry.enabled: false
telemetry.optIn: false

# Newsfeed
newsfeed.enabled: false

# Server configuration
server.basePath: ""
server.rewriteBasePath: false
server.publicBaseUrl: "http://{{ ansible_default_ipv4.address }}:{{ kibana_port }}"

# Memory circuit breaker
server.maxPayload: 1048576

# Search configuration
data.search.aggs.shardDelay.enabled: true

# Legacy browser support
csp.strict: false